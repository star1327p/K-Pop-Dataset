---
title: K-Pop Data Analysis
author:
- Christine P. Chai
- cpchai21@gmail.com
date: \today
header-includes:
  - \usepackage{fontspec} # use fontspec package
  - \usepackage{xeCJK}    # use xeCJK package
  - \setCJKmainfont{標楷體} # font for Windows (Chinese and Japanese)
  - \setCJKmonofont{標楷體} # font for Windows (Chinese and Japanese)
  - \renewcommand{\and}{\\}
output: 
  pdf_document:
    latex_engine: xelatex
    extra_dependencies: float
    number_sections: true
    citation_package: natbib
bibliography: references.bib
biblio-style: apalike
link-citations: true    
---

\renewcommand{\cite}{\citep}

```{r latex-cite-command, include=FALSE}
# %\let\cite\citep
# % from \citep to \cite to cite in author style, e.g. [Mule, 2008]

# % \bibliographystyle{plainnat}
# %\citep: citation in parentheses, e.g. [Mule, 2008]
# %\citet: citation as author, e.g. Mule [2008]
# %\cite: citation as author, \citet by default 
```

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)

def.chunk.hook <- knitr::knit_hooks$get("chunk")
knitr::knit_hooks$set(chunk = function(x, options) {
  x <- def.chunk.hook(x, options)
  ifelse(options$size != "normalsize", paste0("\n \\", options$size,"\n\n", x, "\n\n \\normalsize"), x)
})

knitr::opts_chunk$set(fig.width=6, fig.align = 'center', fig.pos = "H", out.extra = "")
```

Starting in 2024.  

Test citation \cite{chai2024statistical}

# Executive Summary {.unnumbered}

Write something here

# Disclaimer {.unnumbered}

This manuscript is written solely by the author using `R` Markdown \cite{r-markdown}.^[<https://rmarkdown.rstudio.com/>] It is not created by ChatGPT or any other Generative AI. The opinions and views expressed in this manuscript are those of the author, and do not necessarily state or reflect those of any institution or government entity.    

# Introduction

The author became interested in K-Pop music (Korean popular music) from the debut of Tzuyu (Chou Tzu-Yu, 周子瑜).^[<https://en.wikipedia.org/wiki/Tzuyu>]  

Tzuyu is originally from Taiwan, the country in which the author grew up. In 2015, Tzuyu participated in the South Korean reality television show *SIXTEEN*,^[<https://en.wikipedia.org/wiki/Sixteen_(TV_program)>] and eventually got added to the newly-formed girl group *TWICE*.^[<https://en.wikipedia.org/wiki/Twice>]   

Later that year, ...       

Describe the flag controversy incident.^[<https://bit.ly/3DOcNlP>]   

(a lot more content here)  


\textcolor{red}{Important: Write about the K-Pop scandal revealed in 2019 and later.} 

<https://en.wikipedia.org/wiki/Mnet_vote_manipulation_investigation>  

Started with the *Produce X 101* (2019)  
<https://en.wikipedia.org/wiki/Produce_X_101>  

The mysterious 29978 number in *Produce X 101*:  
<https://www.koreaboo.com/news/produce-x-101-rigged-votes-final-members/>  

Mnet admitted to manipulating the votes in the *Produce 101* series and the subsequent reality shows, including *Idol School*.   
<https://www.popdaily.com.tw/korea/846603>  

*Idol School*: Vote Manipulation Investigation (2019)   
<https://www.ptt.cc/bbs/KoreaStar/M.1624467107.A.D7F.html>  

## Read in the *Idol School* Dataset

*Idol School* (偶像學校) (2017)

Motivation: One of the contestants, Snowbaby (蔡瑞雪),^[Snowbaby's YouTube channel: <https://www.youtube.com/@snowbaby>] is also from Taiwan. In fact, Snowbaby^[<https://bit.ly/424u3gv>] graduated from Taipei First Girls' High School,^[<https://www.fg.tp.edu.tw/>] the same high school as the author did.   

In the live reality show *Idol School*, nine winners were selected to form the girl group *fromis_9*.^[<https://en.wikipedia.org/wiki/Fromis_9>] This girl group debuted in 2018 and remained active until the contract ended in 2024.  

\textcolor{red}{Need to write the data description}  

Wikipedia data: <https://en.wikipedia.org/wiki/List_of_Idol_School_contestants>  

We manually copy-pasted the contestant data from Wikipedia into an Excel workbook (`.xlsx`), and used the `R` package `readxl` \cite{r-read-xl} to load the dataset.    

\textcolor{red}{Why didn't we store the dataset in \texttt{.csv} format?}   
For Chinese characters and having multiple data sheets in the same Excel file for consolidation.  

Since the English translation of Korean names look similar to each other \cite{kim2020linguistics}, we also include the date of birth (DOB) to make it easier to uniquely identify each contestant. For those who are able to read Chinese, we put each contestant's name in Chinese characters as well.  

```{r options-setup, include=FALSE}
# Prevent tibble columns from truncating
options(dplyr.width = Inf)
```

```{r idol-school-data}
library(readxl)
idol_school = read_excel("UNFINISHED_Idol_School_Dataset.xlsx",
                         sheet="Idol_School_Dataset")

# Date of birth (DOB) should be date only, not a full timestamp.
idol_school$DOB = as.Date(idol_school$DOB)

columns_to_show = c("Name_Chn", "Name_Eng", "DOB", 
                    "Vocal", "Dance", "Physical", "Overall")

idol_school[1:20, columns_to_show]
```

## *Idol School*: Exploratory Data Analysis

\textcolor{red}{Context: Write about how the vocal, dance, and physical scores were evaluated.}   

Physical testing contains a group exercise and an individual exercise.   

Also mention the top performers in each category.  


\textcolor{red}{What changes did we make from the Wikipedia data?}   

Our presumption is that in each category, no two contestants should have the same score. However, after sorting the *Idol School* data by the physical scores, we found two 3.5's and two 1.2's. Especially that the two 3.5's belong to top-ranked contestants Bae Eun Yeong (裴恩英) and Park Ji Won (朴池原), this issue quickly caught our attention to make corrections to the data.   


\textcolor{red}{Physical: We found two 3.5's and two 1.2's after sorting the scores.}   

In the video clip, Park Ji Won (朴池原) and her partner were the first runner-up in the group physical exercise.^[Screenshot of the group physical exercise: <https://bit.ly/4a7QT9m>] We are surprised that Ji Won's physical score was only 3.5. According to the video's score table for contestants ranked 11th to 20th,^[<https://bit.ly/400KUhH>] Ji Won's physical score should be 6.2. The Wikipedia table shows an inconsistency in Ji Won's overall score, i.e., the average across the three categories. Ji Won's vocal score was 7.9, and her dance score was 5. These numbers seem to be reasonable for Ji Won, because she is known for excellent singing and good dancing as a performer.^[Park Ji Won was the main vocalist in *fromis_9*. <https://bit.ly/402yCFI>] Therefore, we assume both scores to be correct. If the physical score had really been 3.5, then Ji Won's overall score would be 5.47, dropping her from 13th place to the 18th. If the overall score of 6.37 had been correct, then Ji Won's physical score should be 6.2. The second scenario is more likely to be true, given the evidence we found in the video clip. Hence we corrected Ji Won's physical score to 6.2.      

\textcolor{red}{Physical: We found additional two 1.2's after sorting the scores.}   

The two 1.2 scores are more difficult to check for the underlying values, probably because they occurred in two contestants of lower ranking.^[Physical scores of all contestants in *Idol School*: <https://bit.ly/3DRNK0Z>] The two contestants, Jessica Lee (李瑟) and Michelle White (懷特·米雪兒), ranked in the lower half of all 41 contestants in terms of the overall ability test. Both of them got eliminated in the first round, so they did not receive much attention in the show. With the help of Google Translate,^[<https://translate.google.com/>] we were able to translate the image of Korean text to (readable) English. Finally, we discovered that Michelle White's physical score should be 1.3, not 1.2.    

*Idol School* (2017): Videos with subtitles in Simplified Chinese are available on the Bilibili platform.^[<https://www.bilibili.com/video/BV1554y1C7wj/>]

Screenshots saved:    
<https://github.com/star1327p/K-Pop-Dataset/tree/main/Idol_School_Rating_Screenshots> 

\textcolor{red}{Still need to write the description}  

```{r idol-school-eda}

vocal_sorted = sort(idol_school$Vocal, decreasing = TRUE)
dance_sorted = sort(idol_school$Dance, decreasing = TRUE)
physical_sorted = sort(idol_school$Physical, decreasing = TRUE)

# UNFINISHED HERE
combined_all_three = cbind(vocal_sorted, dance_sorted, physical_sorted)
sorted_scores_df = as.data.frame(combined_all_three)

sorted_scores_df[1:10,]
```

\textcolor{red}{Check for the mean and median of each category score}  

```{r idol-mean-and-median}
# UNFINISHED HERE

# Output a table for the mean and median for (vocal, dance, physical)

# Columns: Vocal, Dance, Physical
# Rows: Mean, Median

# Examples:
# mean(idol_school$Dance) # 5.35122
# median(idol_school$Dance) # 5.5

# Rounding to two decimal places?!
```

Correlation matrix  

\textcolor{red}{Need to explain the correlation coefficients and the K-Pop context.}  

Diagonal elements are always exactly 1.  

Create the scatterplots and/or correlation plots!   
\textcolor{red}{Use \texttt{ggplot} or not} ?!    

Why is the correlation so low between dance and physical scores?   

Dance is mainly about technique, not always about the person's physical ability. (citation needed)   

Contestants with a remarkably high score in dance but a low score in physical:  
e.g. Bae Eun Yeong (裴恩英)   
e.g. Lee Hae In (李海印)   

```{r idol-scores-correlation}
# UNFINISHED HERE
cor(idol_school[,c("Vocal","Dance","Physical")])
```

Alternatively, we can also obtain the pairwise correlation of each category.  

```{r idol-scores-pairwise}
# UNFINISHED HERE
cor(idol_school$Vocal, idol_school$Dance)

# UNFINISHED HERE
# Need to print all three pairs.
# cor(idol_school$Dance, idol_school$Physical)
# cor(idol_school$Vocal, idol_school$Physical)
```

## Idol School: Additional Resources

Students who were eliminated from the show:  
<https://www.ptt.cc/bbs/fromis_9/M.1555819461.A.C73.html>

Someone else used random forests to predict the final ranking:  
<https://shavid.pixnet.net/blog/post/331691281>


## Read in the *Produce 48* Dataset

*Produce 48* dataset (2018)   

Wikipedia data: <https://en.wikipedia.org/wiki/Produce_48>

Some former contestants in *Idol School* tried again in the *Produce 48* reality show in 2018.   

A total of 12 contestants were eventually selected from *Produce 48* to create the time-limited girl group \textit{IZ*ONE},^[<https://en.wikipedia.org/wiki/Iz*One>] which was active during 2018-2021 in both Korea and Japan.  

```{r produce-48-data}
produce_48_data = read_excel("UNFINISHED_Idol_School_Dataset.xlsx",
                             sheet="Produce_48_Dataset")

# Date of birth (DOB) should be date only, not a full timestamp.
produce_48_data$DOB = as.Date(produce_48_data$DOB)

columns_to_show = c("Name_Chn", "Name_Eng", "DOB", 
                    "First_Eval", "Second_Eval", "Final_Rank")

produce_48_data[1:20, columns_to_show]
```


Still working on the data entry.

```{r produce-48-ranking-31to40}
# UNFINISHED HERE
produce_48_data[51:60, columns_to_show]
```


# Tentative Placeholders

Write something here

## Test for Non-English Characters

CJK = Chinese, Japanese, Korean

Chinese example

RStudio有辦法打中文嗎？

```{r print-Chinese}
print("大家好，很高興能認識你們！")
```

Japanese example

思い出にするにはまだ早すぎる

```{r print-Japanese}
print("みやわき さくら")
print("宮脇 咲良")
```

This template does not support Korean characters yet.

## R Markdown Narrative

This is an `R` Markdown document. Markdown is a simple formatting syntax for authoring HTML, PDF, and MS Word documents. For more details on using `R` Markdown see <http://rmarkdown.rstudio.com>.

When you click the **Knit** button a document will be generated that includes both content as well as the output of any embedded `R` code chunks within the document. You can embed an `R` code chunk like this:

```{r cars}
summary(cars)
```

## Including Plots

You can also embed plots, for example in Figure \ref{fig:pressure}:

```{r pressure, fig.cap="Test Plot", echo=FALSE}
plot(pressure)
```

Note that the `echo = FALSE` parameter was added to the code chunk to prevent printing of the `R` code that generated the plot.

# Acknowledgments {.unnumbered}

The author is immensely grateful to her significant other, Hugh Hendrickson, for providing his support in the author's professional development.   

Technical discussions: Cheng-Shun (Adson) Liu and Chih-Kuang (Kevin) Lee.

\addcontentsline{toc}{section}{References} 
